<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OIKOS ‚Äî Rede</title>
  <link rel="stylesheet" href="assets/css/style.css" />
  <style>
    #netCanvas{ pointer-events:none !important; }
    .logo{ cursor:pointer; user-select:none; }
  </style>
</head>

<body class="net">
  <canvas id="netCanvas"></canvas>

  <!-- HUD -->
  <div class="hud" id="redeRoot">

    <!-- Top bar -->
    <div class="panel hud-top">
      <div class="hud-brand">
        <!-- LOGO = ADMIN SECRETO -->
        <div class="logo" id="adminTrigger" title="OIKOS">OIKOS</div>
        <div class="status">Comunica√ß√£o direta comprometida. Usa apenas se necess√°rio.</div>
      </div>
      <div class="hud-actions">
        <button class="btn" id="btnLogout" type="button">SAIR</button>
      </div>
    </div>

    <!-- Workspace -->
    <div class="panel hud-left">

      <!-- TABS -->
      <div class="tabs2">
        <button class="tab2 active" data-tab="mensagens" type="button">MENSAGENS</button>

        <!-- LINKS REAIS (n√£o dependem do JS) -->
        <a class="tab2" href="arquivos.html" id="tabArquivo"
           style="text-decoration:none; display:inline-flex; align-items:center;">
          ARQUIVO
        </a>

        <a class="tab2" href="nao-voltei.html" id="tabNaoVoltei"
           style="text-decoration:none; display:inline-flex; align-items:center;">
          SE EU N√ÉO VOLTAR
        </a>

        <a class="tab2"
           href="canal_nao_autorizado.html"
           style="
             text-decoration:none;
             display:inline-flex;
             align-items:center;
             gap:8px;
             border-color: rgba(255,120,120,.35);
             color: rgba(255,160,160,.95);
           ">
          <span style="
            width:8px;
            height:8px;
            border-radius:999px;
            background: rgba(255,120,120,.95);
            box-shadow: 0 0 12px rgba(255,120,120,.6);
          "></span>
          CANAL N√ÉO AUTORIZADO
        </a>
      </div>

      <!-- Mensagens -->
      <div class="view" data-panel="mensagens">
        <button id="lockMensagens" class="lockbox2" type="button">
          üîí ACESSO BLOQUEADO<br/>
          Requer C√≥digo 01.
        </button>

        <!-- come√ßa oculto (app.js liga/desliga) -->
        <div id="contentMensagens" style="display:none; pointer-events:none; opacity:.35;">
          <div class="msgGrid">
            <div class="msgList">
              <button class="msgBtn" data-msg="gabriel" type="button">Gabriel</button>
              <button class="msgBtn" data-msg="alice" type="button">Alice</button>
              <button class="msgBtn" data-msg="ice" type="button">Ice</button>
            </div>

            <div class="msgView">
              <p class="msgTitle" id="msgTitle">Selecione um contacto.</p>

              <div id="msgLog" style="display:flex; flex-direction:column; gap:8px; margin:10px 0;"></div>

              <form id="msgForm" style="display:flex; gap:10px; margin-top:auto;">
                <input id="msgInput" type="text" placeholder="escreve‚Ä¶" autocomplete="off"
                  style="flex:1; min-width:0; padding:10px 12px; border-radius:12px;
                        border:1px solid rgba(120,255,214,.18);
                        background: rgba(0,0,0,.45); color: rgba(232,237,246,.92);
                        font-family: var(--mono); outline:none;">
                <button class="btn" type="submit">ENVIAR</button>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- MODAL -->
      <div class="modalBack" id="codeModal" style="display:none;">
        <div class="modal">
          <div class="modalHead">
            <p class="modalTitle" id="modalTitle">Inserir c√≥digo</p>
            <button class="modalClose" id="modalClose" type="button">FECHAR</button>
          </div>

          <form id="modalForm" class="modalRow">
            <input id="modalCode" type="text" placeholder="padr√£o / data / associa√ß√£o" autocomplete="off" />
            <button class="btn" type="submit">VALIDAR</button>
          </form>

          <div class="modalMsg" id="modalMsg"></div>
        </div>
      </div>

    </div>
  </div>

  <!-- scripts -->
  <script src="assets/js/keys.js"></script>
  <script src="assets/js/net.js"></script>
  <script src="assets/js/app.js"></script>

  <!-- ADMIN: 5 cliques no OIKOS -> pede c√≥digo -> vai para admin.html -->
  <script>
    (function(){
      const logo = document.getElementById("adminTrigger");
      if(!logo) return;

      let clicks = 0;
      let t = null;

      logo.addEventListener("click", () => {
        clicks++;
        clearTimeout(t);
        t = setTimeout(() => { clicks = 0; }, 1200);

        if (clicks >= 5) {
          clicks = 0;

          // Se o teu app.js tiver setupCodeModal global, usamos; se n√£o, vamos direto
          if (typeof setupCodeModal === "function") {
            const { openModal } = setupCodeModal();
            openModal("√Årea reservada ‚Äî ADMIN", "admin", () => {
              window.location.href = "admin.html";
            });
          } else {
            window.location.href = "admin.html";
          }
        }
      });
    })();
  </script>
</body>
</html>
