<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OIKOS ‚Äî Rede</title>
  <link rel="stylesheet" href="assets/css/style.css" />

  <!-- FIX: o canvas n√£o pode bloquear cliques (admin secreto) -->
  <style>
    #netCanvas { pointer-events: none !important; }
    .hud, .panel { position: relative; z-index: 2; }
    .hud-top { z-index: 3; }
    .logo { pointer-events: auto; user-select: none; }
  </style>
</head>

<body class="net">
  <canvas id="netCanvas"></canvas>

  <!-- HUD -->
  <div class="hud" id="redeRoot">

    <!-- Top bar -->
    <div class="panel hud-top">
      <div class="hud-brand">
        <div class="logo">OIKOS</div>
        <div class="status">Comunica√ß√£o direta comprometida. Usa apenas se necess√°rio.</div>
      </div>
      <div class="hud-actions">
        <button class="btn" id="btnLogout" type="button">SAIR</button>
      </div>
    </div>

    <!-- Workspace -->
    <div class="panel hud-left">
      <div class="tabs2">
        <button class="tab2 active" data-tab="mensagens" type="button">MENSAGENS</button>

        <a class="tab2" href="arquivos.html" id="tabArquivo"
           style="text-decoration:none; display:inline-flex; align-items:center;">
          ARQUIVO
        </a>

        <a class="tab2" href="nao-voltei.html" id="tabNaoVoltei"
           style="text-decoration:none; display:inline-flex; align-items:center;">
          SE EU N√ÉO VOLTAR
        </a>

        <a class="tab2"
           href="canal_nao_autorizado.html"
           style="
             text-decoration:none;
             display:inline-flex;
             align-items:center;
             gap:8px;
             border-color: rgba(255,120,120,.35);
             color: rgba(255,160,160,.95);
           ">
          <span style="
            width:8px;
            height:8px;
            border-radius:999px;
            background: rgba(255,120,120,.95);
            box-shadow: 0 0 12px rgba(255,120,120,.6);
          "></span>
          CANAL N√ÉO AUTORIZADO
        </a>
      </div>

      <!-- Mensagens -->
      <div class="view" data-panel="mensagens">
        <button id="lockMensagens" class="lockbox2" type="button">
          üîí ACESSO BLOQUEADO<br/>
          Requer C√≥digo 01.
        </button>

        <div id="contentMensagens" style="display:none; pointer-events:none; opacity:.35;">
          <div class="msgGrid">
            <div class="msgList">
              <button class="msgBtn" data-msg="gabriel" type="button">Gabriel</button>
              <button class="msgBtn" data-msg="alice" type="button">Alice</button>
              <button class="msgBtn" data-msg="ice" type="button">Ice</button>
            </div>

            <div class="msgView">
              <p class="msgTitle" id="msgTitle">Selecione um contacto.</p>
              <div id="msgLog" style="display:flex; flex-direction:column; gap:8px; margin:10px 0;"></div>

              <form id="msgForm" style="display:flex; gap:10px; margin-top:auto;">
                <input id="msgInput" type="text" placeholder="escreve‚Ä¶" autocomplete="off"
                  style="flex:1; min-width:0; padding:10px 12px; border-radius:12px;
                        border:1px solid rgba(120,255,214,.18);
                        background: rgba(0,0,0,.45); color: rgba(232,237,246,.92);
                        font-family: var(--mono); outline:none;">
                <button class="btn" type="submit">ENVIAR</button>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- ADMIN (SEM TAB VIS√çVEL) -->
      <div class="view" data-panel="admin" style="display:none;">
        <div class="lockbox2" style="border-color: rgba(120,255,214,.25); color: rgba(120,255,214,.9);">
          √Årea reservada. Logs e respostas.
        </div>

        <div style="margin-top:12px;">
          <p class="msgTitle" style="margin-bottom:8px;">Conversas</p>
          <div id="adminThreads" class="list2"></div>
        </div>

        <div style="margin-top:12px;">
          <p class="msgTitle" id="adminTitle">Seleciona uma conversa.</p>
          <div id="adminLog" style="display:flex; flex-direction:column; gap:8px; margin:10px 0;"></div>

          <form id="adminForm" style="display:flex; gap:10px; flex-wrap:wrap;">
            <input id="adminName" type="text" placeholder="assinatura (ex: Gabriel)" autocomplete="off"
              style="width:220px; padding:10px 12px; border-radius:12px;
                    border:1px solid rgba(120,255,214,.18);
                    background: rgba(0,0,0,.45); color: rgba(232,237,246,.92);
                    font-family: var(--mono); outline:none;">

            <input id="adminInput" type="text" placeholder="responder‚Ä¶" autocomplete="off"
              style="flex:1; min-width:220px; padding:10px 12px; border-radius:12px;
                    border:1px solid rgba(120,255,214,.18);
                    background: rgba(0,0,0,.45); color: rgba(232,237,246,.92);
                    font-family: var(--mono); outline:none;">
            <button class="btn" type="submit">RESPONDER</button>
          </form>
        </div>
      </div>

    </div>
  </div>

  <!-- MODAL -->
  <div class="modalBack" id="codeModal" style="display:none;">
    <div class="modal">
      <div class="modalHead">
        <p class="modalTitle" id="modalTitle">Inserir c√≥digo</p>
        <button class="modalClose" id="modalClose" type="button">FECHAR</button>
      </div>

      <form id="modalForm" class="modalRow">
        <input id="modalCode" type="text" placeholder="padr√£o / data / associa√ß√£o" autocomplete="off" />
        <button class="btn" type="submit">VALIDAR</button>
      </form>

      <div class="modalMsg" id="modalMsg"></div>
    </div>
  </div>

  <!-- Ordem correta -->
  <script src="assets/js/keys.js"></script>
  <script src="assets/js/net.js"></script>
  <script src="assets/js/app.js"></script>

  <!-- refor√ßo -->
  <script>
    const c = document.getElementById("netCanvas");
    if (c) c.style.pointerEvents = "none";
  </script>
</body>
</html>
